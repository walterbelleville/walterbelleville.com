/**
 * angular-recaptcha build:2014-12-19 
 * https://github.com/vividcortex/angular-recaptcha 
 * Copyright (c) 2014 VividCortex 
**/

!function(a){"use strict";a.module("vcRecaptcha",[])}(angular),function(a){"use strict";var b=a.module("vcRecaptcha");b.service("vcRecaptchaService",["$timeout","$window","$q",function(a,b,c){function d(){return f?c.when(f):h}function e(){if(!f)throw new Error("reCaptcha has not been loaded yet.")}var f,g=c.defer(),h=g.promise;return b.vcRecapthaApiLoaded=function(){f=b.grecaptcha,g.resolve(f)},{create:function(a,b,c,e){return e.callback=c,e.sitekey=b,d().then(function(b){return b.render(a,e)})},reload:function(a){e(),f.reset(a)},getResponse:function(a){return e(),f.getResponse(a)}}}])}(angular),function(a){"use strict";function b(){throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create')}var c=a.module("vcRecaptcha");c.directive("vcRecaptcha",["$log","$timeout","vcRecaptchaService",function(a,c,d){return{restrict:"A",scope:{key:"=",onCreate:"&",onSuccess:"&"},link:function(a,c,e){e.hasOwnProperty("key")||b(),a.widgetId=null;var f=a.$watch("key",function(g){if(g){40!==g.length&&b();var h=function(){a.onSuccess({response:d.getResponse(a.widgetId)})};d.create(c[0],a.key,h,{theme:e.theme||null}).then(function(b){a.widgetId=b,a.onCreate({widgetId:a.widgetId})}),f()}})}}}])}(angular);